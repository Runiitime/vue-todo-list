{"remainingRequest":"C:\\todo.list\\node_modules\\thread-loader\\dist\\cjs.js!C:\\todo.list\\node_modules\\babel-loader\\lib\\index.js!C:\\todo.list\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\todo.list\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\todo.list\\src\\components\\Todo.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\todo.list\\src\\components\\Todo.vue","mtime":1554285399187},{"path":"C:\\todo.list\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\todo.list\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\todo.list\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\todo.list\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\todo.list\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.find\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport _ from 'lodash';\nexport default {\n  name: 'todo-list',\n  data: function data() {\n    return {\n      /**\r\n       * @name text\r\n       * @param {String} Заголовок todo-элемента\r\n       * @return {String} Result value\r\n      */\n      text: '',\n\n      /**\r\n       * @name selected\r\n       * @param {String} Выбранные элемент из select-списка\r\n       * @return {String} Result value\r\n      */\n      selected: '',\n\n      /**\r\n       * @name items\r\n       * @param {Array} Список элеменов\r\n       * @return {Array} Result value\r\n      */\n      items: [{\n        id: 1,\n        isDone: false,\n        isParent: true,\n        text: '1',\n        value: 'p_1',\n        children: [{\n          id: 3,\n          isDone: false,\n          isParent: false,\n          parentId: 'p_1',\n          text: '11',\n          value: 'p_13'\n        }, {\n          id: 4,\n          isDone: false,\n          isParent: false,\n          parentId: 'p_1',\n          text: '111',\n          value: 'p_14'\n        }]\n      }, {\n        id: 2,\n        isDone: false,\n        isParent: true,\n        text: '2',\n        value: 'p_2',\n        children: []\n      }, {\n        id: 5,\n        isDone: false,\n        isParent: true,\n        text: '3',\n        value: 'p_3',\n        children: []\n      }],\n\n      /**\r\n       * @name deleted_item\r\n       * @param {Object} Удаляемый объект\r\n       * @return {Object} Result value\r\n      */\n      deleted_item: {},\n\n      /**\r\n       * @name error\r\n       * @param {String} Ошибка\r\n       * @return {String} Result value\r\n      */\n      error: ''\n    };\n  },\n  created: function created() {},\n  methods: {\n    /*\r\n    * @name showModal()\r\n    * @description Открытие модального окна для добавления элемента\r\n    */\n    showModal: function showModal() {\n      this.$refs.myModalRef.show();\n    },\n\n    /*\r\n    * @name hideModal()\r\n    * @description Закрытие модального окна\r\n    */\n    hideModal: function hideModal() {\n      this.$refs.myModalRef.hide();\n    },\n\n    /*\r\n    * @name add()\r\n    * @description Добавление элемента\r\n    * @return Boolean\r\n    */\n    add: function add() {\n      var _this = this;\n\n      this.error = '';\n      var i = this.items.length + 1;\n\n      if (this.text) {\n        var item = {\n          text: this.text,\n          isDone: false\n        };\n\n        if (this.selected) {\n          var parent = _.find(this.items, function (item) {\n            return item.value === _this.selected;\n          });\n\n          if (parent.children.length < 3) {\n            item.value = \"\".concat(parent.value).concat(i);\n            item.isParent = false;\n            item.parentId = parent.value;\n            item.id = i;\n            parent.children.push(item);\n            this.text = '';\n            this.selected = '';\n            this.hideModal();\n            return true;\n          }\n\n          if (parent.children.length === 3) {\n            this.error = 'Превышен лимит вложенности. Выберите другой элемент';\n            this.text = '';\n            this.selected = '';\n            return true;\n          }\n        } else {\n          item.isParent = true;\n          item.value = \"p_\".concat(i);\n          item.id = i;\n          item.children = [];\n          this.items.push(item);\n          this.text = '';\n          this.selected = '';\n          this.hideModal();\n        }\n      }\n    },\n\n    /*\r\n    * @name cancel()\r\n    * @description Отмена добавления\r\n    */\n    cancel: function cancel() {\n      this.text = '';\n      this.error = '';\n      this.selected = '';\n      this.hideModal();\n    },\n\n    /*\r\n    * @name checkIsDone()\r\n    * @description Проверка на выполненое задание и помещение его в конец списка\r\n    * @param <Number> id элемент\r\n    * @param <Number> parentId родителя\r\n    */\n    checkIsDone: function checkIsDone(id, parentId, elem) {\n      // Предотвращение стандартного события при нажатии на checkbox\n      // event.preventDefault()\n      var checked = []; // Дочерний элемент\n\n      if (parentId !== '') {\n        var parent = this.items[parentId];\n        checked = parent.children[id];\n        checked.isDone = !checked.isDone;\n\n        if (checked.isDone) {\n          var done = _.cloneDeep(checked);\n\n          this.items[parentId].children.splice(id, 1);\n          this.items[parentId].children.push(done);\n        }\n      } else {\n        /* Родительский элемент */\n        console.log(this.items[id]);\n        checked = this.items[id];\n        var children = checked.children;\n        checked.isDone = !checked.isDone;\n\n        for (var i = 0; i < children.length; i++) {\n          if (!children[i].isDone) {\n            children[i].isDone = !children[i].isDone;\n          }\n        }\n\n        if (checked.isDone) {\n          var _done = _.cloneDeep(checked);\n\n          this.items.splice(id, 1); // this.items.push(done)\n          // _.remove(this.items, item => {\n          // \treturn item.id == done.id\n          // })\n\n          this.items.push(_done);\n        }\n      }\n\n      console.log(this.items);\n    },\n\n    /*\r\n    * @name deleteItem()\r\n    * @description Открытие диалога удаления элемента\r\n    * @param <Number> id элемент\r\n    * @param <Number> parentId родителя\r\n    */\n    deleteItem: function deleteItem(id, parentId) {\n      this.deleted_item = {\n        id: id,\n        parentId: parentId\n      };\n      this.$refs.delete_modal.show();\n    },\n\n    /*\r\n    * @name cancelDeleting()\r\n    * @description Отмена удаления элемента\r\n    */\n    cancelDeleting: function cancelDeleting() {\n      this.deleted_item = {};\n      this.$refs.delete_modal.hide();\n    },\n\n    /*\r\n    * @name confirmDelete()\r\n    * @description Подтверждение удаления\r\n    */\n    confirmDelete: function confirmDelete() {\n      if (this.deleted_item.parentId !== '') {\n        this.items[this.deleted_item.parentId].children.splice(this.deleted_item.id, 1);\n      } else {\n        this.items.splice(this.deleted_item.id, 1);\n      }\n\n      this.$refs.delete_modal.hide();\n    },\n\n    /*\r\n    * @name todos()\r\n    * @description Возвращает список элементов для select-а\r\n    * @return Array || []\r\n    */\n    todos: function todos() {\n      return _.filter(this.items, function (item) {\n        return item.isParent === true;\n      });\n    }\n  }\n};",{"version":3,"sources":["Todo.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div class=\"container\">\r\n\t\t<div class=\"title\">\r\n\t\t\t<p>Todo list</p>\r\n\t\t</div>\r\n\t\t<div class=\"content\">\r\n\t\t\t<div class=\"add\">\r\n\t\t\t\t<b-button block variant=\"primary\" @click=\"showModal\">Добавить</b-button>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"items-list\">\r\n\t\t\t\t<ul class=\"items\">\r\n\t\t\t\t\t<li class=\"item-parent\" v-for=\"(item, id) in items\">\r\n\t\t\t\t\t\t<div class=\"item\">\r\n\t\t\t\t\t\t\t<p @click=\"checkIsDone(id, '', 'p tag')\" :class=\"{done:item.isDone}\">\r\n\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t{{ item.text }}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t<a class=\"delete_link\" @click=\"deleteItem(id, '')\" v-if=\"item.isDone\">Удалить</a>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<ul class=\"item-children\" v-for=\"(child, childId) in item.children\">\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<div class=\"child\">\r\n\t\t\t\t\t\t\t\t\t<p @click=\"checkIsDone(childId, id, 'p tag')\" :class=\"{done:child.isDone}\">\r\n\t\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t\t{{ child.text }}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t<a class=\"delete_link\" @click=\"deleteItem(childId, id)\" v-if=\"child.isDone\">Удалить</a>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<b-modal ref=\"myModalRef\" hide-footer title=\"Добавление нового элемента\">\r\n\t\t\t<div class=\"d-block text-center\">\r\n\t\t\t    <p v-if=\"error !== ''\" class=\"error-text\">{{ error }}</p>\r\n\t\t\t    <b-form-group\r\n\t\t\t      id=\"fieldset-2\"\r\n\t\t\t      label=\"Родительский элемент\"\r\n\t\t\t      label-for=\"todo\"\r\n\t\t\t      label-cols-sm=\"4\"\r\n      \t\t\t  label-cols-lg=\"3\"\r\n\t\t\t    >\r\n\t\t\t      <b-form-select id=\"todo\" v-model=\"selected\" :options=\"todos()\"></b-form-select>\r\n\t\t\t    </b-form-group>\r\n\t\t\t\t<b-form-group\r\n\t\t\t      id=\"fieldset-1\"\r\n\t\t\t      label=\"Заголовок\"\r\n\t\t\t      label-for=\"text\"\r\n\t\t\t      label-cols-sm=\"4\"\r\n      \t\t\t  label-cols-lg=\"3\"\r\n\t\t\t    >\r\n\t\t\t      <b-form-input id=\"text\" v-model=\"text\" type=\"text\" placeholder=\"Введите текст\" />\r\n\t\t\t    </b-form-group>\r\n\t\t\t</div>\r\n\t\t\t<b-button class=\"mt-3\" variant=\"primary\" block @click=\"add\">Добавить</b-button>\r\n\t\t\t<b-button class=\"mt-2\" variant=\"danger\" block @click=\"cancel\">Отмена</b-button>\r\n\t\t</b-modal>\r\n\r\n\t\t<b-modal ref=\"delete_modal\" hide-footer title=\"Подтверждение удаления\">\r\n\t\t\t<div class=\"d-block text-center\">\r\n\t\t\t\t<h3>Вы действительно хотите удалить элемент?</h3>\r\n\t\t\t</div>\r\n\t\t\t<b-button class=\"mt-3\" variant=\"primary\" block @click=\"confirmDelete()\">Да</b-button>\r\n\t\t\t<b-button class=\"mt-2\" variant=\"danger\" block @click=\"cancelDeleting()\">Нет</b-button>\r\n\t\t</b-modal>\r\n\t</div>\r\n</template>\r\n<script>\r\nimport _ from 'lodash'\r\n\texport default {\r\n\t\tname: 'todo-list',\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\t/**\r\n\t\t\t\t * @name text\r\n\t\t\t\t * @param {String} Заголовок todo-элемента\r\n\t\t\t\t * @return {String} Result value\r\n\t\t\t\t*/\r\n\t\t\t\ttext: '',\r\n\t\t\t\t/**\r\n\t\t\t\t * @name selected\r\n\t\t\t\t * @param {String} Выбранные элемент из select-списка\r\n\t\t\t\t * @return {String} Result value\r\n\t\t\t\t*/\r\n\t\t\t\tselected: '',\r\n\t\t\t\t/**\r\n\t\t\t\t * @name items\r\n\t\t\t\t * @param {Array} Список элеменов\r\n\t\t\t\t * @return {Array} Result value\r\n\t\t\t\t*/\r\n\t\t\t\titems: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 1,\r\n\t\t\t\t\t\tisDone: false,\r\n\t\t\t\t\t\tisParent: true,\r\n\t\t\t\t\t\ttext: '1',\r\n\t\t\t\t\t\tvalue: 'p_1',\r\n\t\t\t\t\t\tchildren: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tid: 3,\r\n\t\t\t\t\t\t\t\tisDone: false,\r\n\t\t\t\t\t\t\t\tisParent: false,\r\n\t\t\t\t\t\t\t\tparentId: 'p_1',\r\n\t\t\t\t\t\t\t\ttext: '11',\r\n\t\t\t\t\t\t\t\tvalue: 'p_13'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tid: 4,\r\n\t\t\t\t\t\t\t\tisDone: false,\r\n\t\t\t\t\t\t\t\tisParent: false,\r\n\t\t\t\t\t\t\t\tparentId: 'p_1',\r\n\t\t\t\t\t\t\t\ttext: '111',\r\n\t\t\t\t\t\t\t\tvalue: 'p_14'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 2,\r\n\t\t\t\t\t\tisDone: false,\r\n\t\t\t\t\t\tisParent: true,\r\n\t\t\t\t\t\ttext: '2',\r\n\t\t\t\t\t\tvalue: 'p_2',\r\n\t\t\t\t\t\tchildren: []\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 5,\r\n\t\t\t\t\t\tisDone: false,\r\n\t\t\t\t\t\tisParent: true,\r\n\t\t\t\t\t\ttext: '3',\r\n\t\t\t\t\t\tvalue: 'p_3',\r\n\t\t\t\t\t\tchildren: []\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\t/**\r\n\t\t\t\t * @name deleted_item\r\n\t\t\t\t * @param {Object} Удаляемый объект\r\n\t\t\t\t * @return {Object} Result value\r\n\t\t\t\t*/\r\n\t\t\t\tdeleted_item: {},\r\n\t\t\t\t/**\r\n\t\t\t\t * @name error\r\n\t\t\t\t * @param {String} Ошибка\r\n\t\t\t\t * @return {String} Result value\r\n\t\t\t\t*/\r\n\t\t\t\terror: ''\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {},\r\n\t\tmethods: {\r\n\t\t    /*\r\n\t\t\t * @name showModal()\r\n\t\t\t * @description Открытие модального окна для добавления элемента\r\n\t\t\t*/\r\n\t\t\tshowModal() {\r\n\t\t      this.$refs.myModalRef.show()\r\n\t\t    },\r\n\t\t    /*\r\n\t\t\t * @name hideModal()\r\n\t\t\t * @description Закрытие модального окна\r\n\t\t\t*/\r\n\t\t    hideModal() {\r\n\t\t      this.$refs.myModalRef.hide()\r\n\t\t    },\r\n\t\t    /*\r\n\t\t\t * @name add()\r\n\t\t\t * @description Добавление элемента\r\n\t\t\t * @return Boolean\r\n\t\t\t*/\r\n\t\t    add() {\r\n\t\t      \tthis.error = ''\r\n\t\t      \tlet i = this.items.length + 1\r\n\t\t     \t if(this.text) {\r\n\r\n\t\t\t      \tlet item = {\r\n\t\t\t      \t\ttext: this.text,\r\n\t\t\t      \t\tisDone: false,\r\n\t\t\t      \t}\r\n\r\n\t\t\t      \tif(this.selected) {\r\n\t\t\t      \t\tlet parent = _.find(this.items, item => item.value === this.selected)\r\n\t\t\t      \t\tif(parent.children.length < 3) {\r\n\t\t\t      \t\t\titem.value = `${parent.value}${i}`\r\n\t\t\t\t      \t\titem.isParent = false\r\n\t\t\t\t      \t\titem.parentId = parent.value\r\n\t\t\t\t      \t\titem.id = i\r\n\t\t\t\t      \t\tparent.children.push(item)\r\n\t\t\t\t      \t\tthis.text = ''\r\n\t\t\t\t            this.selected = ''\r\n\t\t\t\t      \t\tthis.hideModal()\r\n\t\t\t\t      \t\treturn true\r\n\t\t\t      \t\t}\r\n\t\t\t      \t\tif(parent.children.length === 3) {\r\n\t\t\t      \t\t\tthis.error = 'Превышен лимит вложенности. Выберите другой элемент'\r\n\t\t\t      \t\t\tthis.text = ''\r\n\t\t\t\t        \tthis.selected = ''\r\n\t\t\t      \t\t\treturn true\r\n\t\t\t      \t\t}\r\n\t\t\t      \t} else {\r\n\t\t\t      \t\titem.isParent = true\r\n\t\t\t      \t\titem.value = `p_${i}`\r\n\t\t\t      \t\titem.id = i\r\n\t\t\t      \t\titem.children = []\r\n\t\t\t      \t\tthis.items.push(item)\r\n\t\t\t      \t\tthis.text = ''\r\n\t\t\t\t        this.selected = ''\r\n\t\t\t\t        this.hideModal()\r\n\t\t\t      \t}\r\n\t\t\t        \r\n\t\t    \t}\r\n\t\t    },\r\n\t\t    /*\r\n\t\t\t * @name cancel()\r\n\t\t\t * @description Отмена добавления\r\n\t\t\t*/\r\n\t\t    cancel() {\r\n\t\t      this.text = ''\r\n\t\t      this.error = ''\r\n\t\t      this.selected = ''\r\n\t\t      this.hideModal()\r\n\t\t    },\r\n\t\t    /*\r\n\t\t\t * @name checkIsDone()\r\n\t\t\t * @description Проверка на выполненое задание и помещение его в конец списка\r\n\t\t\t * @param <Number> id элемент\r\n\t\t\t * @param <Number> parentId родителя\r\n\t\t\t*/\r\n\t\t    checkIsDone(id, parentId, elem) {\r\n\t\t    \t// Предотвращение стандартного события при нажатии на checkbox\r\n\t\t    \t// event.preventDefault()\r\n\r\n\t\t    \tlet checked = []\r\n\r\n\t\t    \t// Дочерний элемент\r\n\t\t    \tif(parentId !== '') {\r\n\t\t    \t\tlet parent = this.items[parentId]\r\n\t\t    \t\tchecked = parent.children[id]\r\n\t\t    \t\tchecked.isDone = !checked.isDone\r\n\r\n\t\t    \t\tif(checked.isDone) {\r\n\t\t    \t\t\tlet done = _.cloneDeep(checked)\r\n\t\t    \t\t\tthis.items[parentId].children.splice(id, 1)\r\n\t\t    \t\t\tthis.items[parentId].children.push(done)\r\n\t\t    \t\t}\r\n\t\t    \t} else { /* Родительский элемент */\r\n\t\t    \t\tconsole.log(this.items[id])\r\n\t\t    \t\tchecked = this.items[id]\r\n\t\t    \t\tlet children = checked.children\r\n\t\t    \t\tchecked.isDone = !checked.isDone;\r\n\r\n\t\t    \t\tfor(let i = 0; i < children.length; i++) {\r\n\t\t    \t\t\tif(!children[i].isDone) {\r\n\t\t    \t\t\t\tchildren[i].isDone = !children[i].isDone\r\n\t\t    \t\t\t}\r\n\t\t    \t\t}\r\n\r\n\t\t    \t\tif(checked.isDone) {\r\n\t\t    \t\t\tlet done = _.cloneDeep(checked)\r\n\t\t\t    \t\tthis.items.splice(id, 1)\r\n\t\t\t    \t\t// this.items.push(done)\r\n\t\t\t    \t\t// _.remove(this.items, item => {\r\n\t\t\t    \t\t// \treturn item.id == done.id\r\n\t\t\t    \t\t// })\r\n\t\t\t    \t\tthis.items.push(done)\r\n\t\t    \t\t}\r\n\t\t    \t}\r\n\t\t    \tconsole.log(this.items)\r\n\t\t    },\r\n\t\t    /*\r\n\t\t\t * @name deleteItem()\r\n\t\t\t * @description Открытие диалога удаления элемента\r\n\t\t\t * @param <Number> id элемент\r\n\t\t\t * @param <Number> parentId родителя\r\n\t\t\t*/\r\n\t\t    deleteItem(id, parentId) {\r\n\t\t    \tthis.deleted_item = {id, parentId}\r\n\t\t    \tthis.$refs.delete_modal.show()\r\n\t\t    },\r\n\t\t    /*\r\n\t\t\t * @name cancelDeleting()\r\n\t\t\t * @description Отмена удаления элемента\r\n\t\t\t*/\r\n\t\t    cancelDeleting() {\r\n\t\t    \tthis.deleted_item = {}\r\n\t\t    \tthis.$refs.delete_modal.hide()\r\n\t\t    },\r\n\t\t    /*\r\n\t\t\t * @name confirmDelete()\r\n\t\t\t * @description Подтверждение удаления\r\n\t\t\t*/\r\n\t\t    confirmDelete() {\r\n\t\t\t\tif(this.deleted_item.parentId !== '') {\r\n\t\t    \t\tthis.items[this.deleted_item.parentId].children.splice(this.deleted_item.id, 1)\r\n\t\t    \t} else {\r\n\t\t    \t\tthis.items.splice(this.deleted_item.id, 1)\r\n\t\t    \t}\r\n\t\t    \tthis.$refs.delete_modal.hide()\r\n\t\t    },\r\n\t\t    /*\r\n\t\t\t * @name todos()\r\n\t\t\t * @description Возвращает список элементов для select-а\r\n\t\t\t * @return Array || []\r\n\t\t\t*/\r\n\t\t    todos() {\r\n\t\t\t\treturn _.filter(this.items, item => item.isParent === true)\r\n\t\t\t}\r\n\t\t},\r\n\t};\r\n</script>"],"sourceRoot":"src/components"}]}