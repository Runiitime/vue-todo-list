(function(e){function t(t){for(var n,o,l=t[0],a=t[1],c=t[2],u=0,f=[];u<l.length;u++)o=l[u],s[o]&&f.push(s[o][0]),s[o]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);d&&d(t);while(f.length)f.shift()();return r.push.apply(r,c||[]),i()}function i(){for(var e,t=0;t<r.length;t++){for(var i=r[t],n=!0,l=1;l<i.length;l++){var a=i[l];0!==s[a]&&(n=!1)}n&&(r.splice(t--,1),e=o(o.s=i[0]))}return e}var n={},s={app:0},r=[];function o(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=n,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(i,n,function(t){return e[t]}.bind(null,n));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],a=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var d=a;r.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"034f":function(e,t,i){"use strict";var n=i("64a9"),s=i.n(n);s.a},"56d7":function(e,t,i){"use strict";i.r(t);i("7f7f"),i("cadf"),i("551c"),i("f751"),i("097d");var n=i("2b0e"),s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("todo-list")],1)},r=[],o={name:"app",components:{}},l=o,a=(i("034f"),i("2877")),c=Object(a["a"])(l,s,r,!1,null,null,null),d=c.exports,u=i("9f7b"),f=i.n(u),h=(i("f9e3"),i("2dd8"),i("6672"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[e._m(0),i("div",{staticClass:"content"},[i("div",{staticClass:"add"},[i("b-button",{attrs:{block:"",variant:"primary"},on:{click:e.showModal}},[e._v("Добавить")])],1),i("div",{staticClass:"items-list"},[i("ul",{staticClass:"items"},e._l(e.items,function(t,n){return i("li",{staticClass:"item-parent"},[i("div",{staticClass:"item"},[i("p",{class:{done:t.isDone},on:{click:function(t){return e.checkIsDone(n,"")}}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.isDone,expression:"item.isDone"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.isDone)?e._i(t.isDone,null)>-1:t.isDone},on:{change:function(i){var n=t.isDone,s=i.target,r=!!s.checked;if(Array.isArray(n)){var o=null,l=e._i(n,o);s.checked?l<0&&e.$set(t,"isDone",n.concat([o])):l>-1&&e.$set(t,"isDone",n.slice(0,l).concat(n.slice(l+1)))}else e.$set(t,"isDone",r)}}}),i("span",[e._v("\n\t\t\t\t\t\t\t\t\t"+e._s(t.text)+"\n\t\t\t\t\t\t\t\t")])]),t.isDone?i("a",{staticClass:"delete_link",on:{click:function(t){return e.deleteItem(n,"")}}},[e._v("Удалить")]):e._e()]),e._l(t.children,function(t,s){return i("ul",{staticClass:"item-children"},[i("li",[i("div",{staticClass:"child"},[i("p",{class:{done:t.isDone},on:{click:function(t){return e.checkIsDone(s,n)}}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.isDone,expression:"child.isDone"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.isDone)?e._i(t.isDone,null)>-1:t.isDone},on:{change:function(i){var n=t.isDone,s=i.target,r=!!s.checked;if(Array.isArray(n)){var o=null,l=e._i(n,o);s.checked?l<0&&e.$set(t,"isDone",n.concat([o])):l>-1&&e.$set(t,"isDone",n.slice(0,l).concat(n.slice(l+1)))}else e.$set(t,"isDone",r)}}}),i("span",[e._v("\n\t\t\t\t\t\t\t\t\t\t\t"+e._s(t.text)+"\n\t\t\t\t\t\t\t\t\t\t")])]),t.isDone?i("a",{staticClass:"delete_link",on:{click:function(t){return e.deleteItem(s,n)}}},[e._v("Удалить")]):e._e()])])])})],2)}),0)])]),i("b-modal",{ref:"myModalRef",attrs:{"hide-footer":"",title:"Добавление нового элемента"}},[i("div",{staticClass:"d-block text-center"},[""!==e.error?i("p",{staticClass:"error-text"},[e._v(e._s(e.error))]):e._e(),i("b-form-group",{attrs:{id:"fieldset-2",label:"Родительский элемент","label-for":"todo","label-cols-sm":"4","label-cols-lg":"3"}},[i("b-form-select",{attrs:{id:"todo",options:e.todos()},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1),i("b-form-group",{attrs:{id:"fieldset-1",label:"Заголовок","label-for":"text","label-cols-sm":"4","label-cols-lg":"3"}},[i("b-form-input",{attrs:{id:"text",type:"text",placeholder:"Введите текст"},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}})],1)],1),i("b-button",{staticClass:"mt-3",attrs:{variant:"primary",block:""},on:{click:e.add}},[e._v("Добавить")]),i("b-button",{staticClass:"mt-2",attrs:{variant:"danger",block:""},on:{click:e.cancel}},[e._v("Отмена")])],1),i("b-modal",{ref:"delete_modal",attrs:{"hide-footer":"",title:"Подтверждение удаления"}},[i("div",{staticClass:"d-block text-center"},[i("h3",[e._v("Вы действительно хотите удалить элемент?")])]),i("b-button",{staticClass:"mt-3",attrs:{variant:"primary",block:""},on:{click:function(t){return e.confirmDelete()}}},[e._v("Да")]),i("b-button",{staticClass:"mt-2",attrs:{variant:"danger",block:""},on:{click:function(t){return e.deleteCancel()}}},[e._v("Нет")])],1)],1)}),p=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"title"},[i("p",[e._v("Todo list")])])}],m=(i("7514"),i("2ef0")),v=i.n(m),b={name:"todo-list",data:function(){return{text:"",selected:"",items:[{id:1,isDone:!1,isParent:!0,text:"1",value:"p_1",children:[{id:3,isDone:!1,isParent:!1,parentId:"p_1",text:"11",value:"p_13"},{id:4,isDone:!1,isParent:!1,parentId:"p_1",text:"111",value:"p_14"}]},{id:2,isDone:!1,isParent:!0,text:"2",value:"p_2",children:[]},{id:5,isDone:!1,isParent:!0,text:"3",value:"p_3",children:[]}],deleted_item:{},error:""}},created:function(){},methods:{showModal:function(){this.$refs.myModalRef.show()},hideModal:function(){this.$refs.myModalRef.hide()},add:function(){var e=this;this.error="";var t=this.items.length+1;if(this.text){var i={text:this.text,isDone:!1};if(this.selected){var n=v.a.find(this.items,function(t){return t.value===e.selected});if(n.children.length<3)return i.value="".concat(n.value).concat(t),i.isParent=!1,i.parentId=n.value,i.id=t,n.children.push(i),this.text="",this.selected="",this.hideModal(),!0;if(3===n.children.length)return this.error="Превышен лимит вложенности. Выберите другой элемент",this.text="",this.selected="",!0}else i.isParent=!0,i.value="p_".concat(t),i.id=t,i.children=[],this.items.push(i),this.text="",this.selected="",this.hideModal()}},cancel:function(){this.text="",this.error="",this.selected="",this.hideModal()},checkIsDone:function(e,t){var i=[];if(""!==t){var n=this.items[t];if(i=n.children[e],i.isDone=!i.isDone,i.isDone){var s=v.a.cloneDeep(i);this.items[t].children.splice(e,1),this.items[t].children.push(s)}}else{i=this.items[e];var r=i.children;i.isDone=!i.isDone;for(var o=0;o<r.length;o++)r[o].isDone||(r[o].isDone=!r[o].isDone);if(i.isDone){var l=v.a.cloneDeep(i);this.items.splice(e,1),this.items.push(l)}}},deleteItem:function(e,t){this.deleted_item={id:e,parentId:t},this.$refs.delete_modal.show()},confirmDelete:function(){""!==this.deleted_item.parentId?this.items[this.deleted_item.parentId].children.splice(this.deleted_item.id,1):this.items.splice(this.deleted_item.id,1),this.$refs.delete_modal.hide()},todos:function(){return v.a.filter(this.items,function(e){return!0===e.isParent})}}},_=b,D=Object(a["a"])(_,h,p,!1,null,null,null),x=D.exports,k=[x];n["a"].use(f.a),k.forEach(function(e){n["a"].component(e.name,e)}),n["a"].config.productionTip=!1,new n["a"]({render:function(e){return e(d)}}).$mount("#app")},"64a9":function(e,t,i){},6672:function(e,t,i){}});
//# sourceMappingURL=app.047a3549.js.map