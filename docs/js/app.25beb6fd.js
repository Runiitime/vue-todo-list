(function(t){function e(e){for(var n,l,o=e[0],a=e[1],c=e[2],u=0,f=[];u<o.length;u++)l=o[u],s[l]&&f.push(s[l][0]),s[l]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n]);d&&d(e);while(f.length)f.shift()();return r.push.apply(r,c||[]),i()}function i(){for(var t,e=0;e<r.length;e++){for(var i=r[e],n=!0,o=1;o<i.length;o++){var a=i[o];0!==s[a]&&(n=!1)}n&&(r.splice(e--,1),t=l(l.s=i[0]))}return t}var n={},s={app:0},r=[];function l(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,l),i.l=!0,i.exports}l.m=t,l.c=n,l.d=function(t,e,i){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(l.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)l.d(i,n,function(e){return t[e]}.bind(null,n));return i},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],a=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var d=a;r.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"034f":function(t,e,i){"use strict";var n=i("64a9"),s=i.n(n);s.a},"56d7":function(t,e,i){"use strict";i.r(e);i("7f7f"),i("cadf"),i("551c"),i("f751"),i("097d");var n=i("2b0e"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("todo-list")],1)},r=[],l={name:"app",components:{}},o=l,a=(i("034f"),i("2877")),c=Object(a["a"])(o,s,r,!1,null,null,null),d=c.exports,u=i("9f7b"),f=i.n(u),h=(i("f9e3"),i("2dd8"),i("6672"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[t._m(0),i("div",{staticClass:"content"},[i("div",{staticClass:"add"},[i("b-button",{attrs:{block:"",variant:"primary"},on:{click:t.showModal}},[t._v("Добавить")])],1),i("div",{staticClass:"items-list"},[i("ul",{staticClass:"items"},t._l(t.items,function(e,n){return i("li",{staticClass:"item-parent"},[i("div",{staticClass:"item"},[i("p",{class:{done:e.isDone},on:{click:function(e){return t.checkIsDone(n,"","p tag")}}},[i("span",[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e.text)+"\n\t\t\t\t\t\t\t\t")])]),e.isDone?i("a",{staticClass:"delete_link",on:{click:function(e){return t.deleteItem(n,"")}}},[t._v("Удалить")]):t._e()]),t._l(e.children,function(e,s){return i("ul",{staticClass:"item-children"},[i("li",[i("div",{staticClass:"child"},[i("p",{class:{done:e.isDone},on:{click:function(e){return t.checkIsDone(s,n,"p tag")}}},[i("span",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.text)+"\n\t\t\t\t\t\t\t\t\t\t")])]),e.isDone?i("a",{staticClass:"delete_link",on:{click:function(e){return t.deleteItem(s,n)}}},[t._v("Удалить")]):t._e()])])])})],2)}),0)])]),i("b-modal",{ref:"myModalRef",attrs:{"hide-footer":"",title:"Добавление нового элемента"}},[i("div",{staticClass:"d-block text-center"},[""!==t.error?i("p",{staticClass:"error-text"},[t._v(t._s(t.error))]):t._e(),i("b-form-group",{attrs:{id:"fieldset-2",label:"Родительский элемент","label-for":"todo","label-cols-sm":"4","label-cols-lg":"3"}},[i("b-form-select",{attrs:{id:"todo",options:t.todos()},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1),i("b-form-group",{attrs:{id:"fieldset-1",label:"Заголовок","label-for":"text","label-cols-sm":"4","label-cols-lg":"3"}},[i("b-form-input",{attrs:{id:"text",type:"text",placeholder:"Введите текст"},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1)],1),i("b-button",{staticClass:"mt-3",attrs:{variant:"primary",block:""},on:{click:t.add}},[t._v("Добавить")]),i("b-button",{staticClass:"mt-2",attrs:{variant:"danger",block:""},on:{click:t.cancel}},[t._v("Отмена")])],1),i("b-modal",{ref:"delete_modal",attrs:{"hide-footer":"",title:"Подтверждение удаления"}},[i("div",{staticClass:"d-block text-center"},[i("h3",[t._v("Вы действительно хотите удалить элемент?")])]),i("b-button",{staticClass:"mt-3",attrs:{variant:"primary",block:""},on:{click:function(e){return t.confirmDelete()}}},[t._v("Да")]),i("b-button",{staticClass:"mt-2",attrs:{variant:"danger",block:""},on:{click:function(e){return t.cancelDeleting()}}},[t._v("Нет")])],1)],1)}),p=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"title"},[i("p",[t._v("Todo list")])])}],m=(i("7514"),i("2ef0")),v=i.n(m),b={name:"todo-list",data:function(){return{text:"",selected:"",items:[{id:1,isDone:!1,isParent:!0,text:"1",value:"p_1",children:[{id:3,isDone:!1,isParent:!1,parentId:"p_1",text:"11",value:"p_13"},{id:4,isDone:!1,isParent:!1,parentId:"p_1",text:"111",value:"p_14"}]},{id:2,isDone:!1,isParent:!0,text:"2",value:"p_2",children:[]},{id:5,isDone:!1,isParent:!0,text:"3",value:"p_3",children:[]}],deleted_item:{},error:""}},created:function(){},methods:{showModal:function(){this.$refs.myModalRef.show()},hideModal:function(){this.$refs.myModalRef.hide()},add:function(){var t=this;this.error="";var e=this.items.length+1;if(this.text){var i={text:this.text,isDone:!1};if(this.selected){var n=v.a.find(this.items,function(e){return e.value===t.selected});if(n.children.length<3)return i.value="".concat(n.value).concat(e),i.isParent=!1,i.parentId=n.value,i.id=e,n.children.push(i),this.text="",this.selected="",this.hideModal(),!0;if(3===n.children.length)return this.error="Превышен лимит вложенности. Выберите другой элемент",this.text="",this.selected="",!0}else i.isParent=!0,i.value="p_".concat(e),i.id=e,i.children=[],this.items.push(i),this.text="",this.selected="",this.hideModal()}},cancel:function(){this.text="",this.error="",this.selected="",this.hideModal()},checkIsDone:function(t,e,i){var n=[];if(""!==e){var s=this.items[e];if(n=s.children[t],n.isDone=!n.isDone,n.isDone){var r=v.a.cloneDeep(n);this.items[e].children.splice(t,1),this.items[e].children.push(r)}}else{console.log(this.items[t]),n=this.items[t];var l=n.children;n.isDone=!n.isDone;for(var o=0;o<l.length;o++)l[o].isDone||(l[o].isDone=!l[o].isDone);if(n.isDone){var a=v.a.cloneDeep(n);this.items.splice(t,1),this.items.push(a)}}console.log(this.items)},deleteItem:function(t,e){this.deleted_item={id:t,parentId:e},this.$refs.delete_modal.show()},cancelDeleting:function(){this.deleted_item={},this.$refs.delete_modal.hide()},confirmDelete:function(){""!==this.deleted_item.parentId?this.items[this.deleted_item.parentId].children.splice(this.deleted_item.id,1):this.items.splice(this.deleted_item.id,1),this.$refs.delete_modal.hide()},todos:function(){return v.a.filter(this.items,function(t){return!0===t.isParent})}}},_=b,x=Object(a["a"])(_,h,p,!1,null,null,null),g=x.exports,D=[g];n["a"].use(f.a),D.forEach(function(t){n["a"].component(t.name,t)}),n["a"].config.productionTip=!1,new n["a"]({render:function(t){return t(d)}}).$mount("#app")},"64a9":function(t,e,i){},6672:function(t,e,i){}});
//# sourceMappingURL=app.25beb6fd.js.map